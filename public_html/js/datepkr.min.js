/*! datepkr.js v1.00.00 | (c) 2015 crowdcc. | @current functions required list | formatDate(milliseconds, dateFormat) * addEvent(element, eventType, callback), removeEvent(element, eventType, callback) * buildNode(nodeName, attributes, content) * buildCalendar(). | crowdcc.com/use */
var datepkr=function(){function t(t,e){var r="",i=new Date(t),c={d:function(){var t=c.j();return 10>t?"0"+t:t},D:function(){return g[c.w()].substring(0,3)},j:function(){return i.getDate()},l:function(){return g[c.w()]+"day"},S:function(){return y[c.j()]||"th"},w:function(){return i.getDay()},F:function(){return a(c.n(),!0)},m:function(){var t=c.n()+1;return 10>t?"0"+t:t},M:function(){return a(c.n(),!1)},n:function(){return i.getMonth()},Y:function(){return i.getFullYear()},y:function(){return c.Y().toString().substring(2,4)}},o=e.split("");return n(o,function(t){r+=c[t]?c[t]():t}),r}function n(t,n){var e=0,r=t.length;for(e;r>e&&n(t[e],e)!==!1;e++);}function e(t,n,e){if(t.addEventListener)t.addEventListener(n,e,!1);else if(t.attachEvent){var r=function(n){n=n||window.event,n.preventDefault=function(t){return function(){t.returnValue=!1}}(n),n.stopPropagation=function(t){return function(){t.cancelBubble=!0}}(n),n.target=n.srcElement,e.call(t,n)};t.attachEvent("on"+n,r)}}function r(t,n,e){t.removeEventListener?t.removeEventListener(n,e,!1):t.detachEvent&&t.detachEvent("on"+n,e)}function i(t,n,e){var r;if(t in M||(M[t]=document.createElement(t)),r=M[t].cloneNode(!1),null!=n)for(var i in n)r[i]=n[i];return null!=e&&("object"==typeof e?r.appendChild(e):r.innerHTML=e),r}function a(t,n){return 1==n?v[t]:v[t].length>3?v[t].substring(0,3):v[t]}function c(t,n,e){return t==m.current.day()&&n==m.current.month.integer()&&e==m.current.year()}function o(){var t=document.createDocumentFragment();return n(g,function(n){t.appendChild(i("th",{},n.substring(0,2)))}),t}function u(){for(;this.calendarBody.hasChildNodes();)this.calendarBody.removeChild(this.calendarBody.lastChild);var t=new Date(this.currentYearView,this.currentMonthView,1).getDay(),n=m.month.numDays(this.currentMonthView,this.currentYearView);this.currentMonth.innerHTML=m.month.string(this.config.fullCurrentMonth,this.currentMonthView)+" "+this.currentYearView,this.calendarBody.appendChild(l(t,n,this.currentMonthView,this.currentYearView))}function s(t,n,e){return i("span",{className:"current-month"},m.month.string(t.fullCurrentMonth,n)+" "+e)}function h(t,n,e){var r=i("div",{className:"months"}),a=i("span",{className:"prev-month"},i("span",{className:"prevMonth"},"&lt;")),c=i("span",{className:"next-month"},i("span",{className:"nextMonth"},"&gt;"));return r.appendChild(a),r.appendChild(c),r}function l(t,n,e,r){var a=document.createDocumentFragment(),o=i("tr"),u=0,s;for(s=1;t>=s;s++)o.appendChild(i("td",null,"&nbsp;")),u++;for(s=1;n>=s;s++){7==u&&(a.appendChild(o),o=i("tr"),u=0);var h=c(s,e,r)?{className:"today"}:null;o.appendChild(i("td",h,i("span",{className:"day"},s))),u++}for(s=1;7-u>=s;s++)o.appendChild(i("td",null,"&nbsp;"));return a.appendChild(o),a}function d(){var t=new Date(this.currentYearView,this.currentMonthView,1).getDay(),n=m.month.numDays(this.currentMonthView,this.currentYearView),r=this,a=inputTop=0,c=this.element;if(c.offsetParent)do a+=c.offsetLeft,inputTop+=c.offsetTop;while(c=c.offsetParent);var u=i("div",{className:"calendar"});u.style.cssText="display: none; position: absolute; z-index: 100;",this.currentMonth=s(this.config,this.currentMonthView,this.currentYearView);var d=h(this.config,this.currentMonthView,this.currentYearView);d.appendChild(this.currentMonth);var f=i("table",null,i("thead",null,i("tr",{className:"weekdays"},o())));return this.calendarBody=i("tbody"),this.calendarBody.appendChild(l(t,n,this.currentMonthView,this.currentYearView)),f.appendChild(this.calendarBody),u.appendChild(d),u.appendChild(f),document.getElementById("ccontainer").appendChild(u),e(u,"click",function(t){V.calendarClick.call(r,t)}),u}var f=[],p=new Date,m={current:{year:function(){return p.getFullYear()},month:{integer:function(){return p.getMonth()},string:function(t){var n=p.getMonth();return a(n,t)}},day:function(){return p.getDate()}},month:{string:function(t,n){var e=n;return a(e,t)},numDays:function(t,n){return 1!=t||3&n||!(n%100)&&n%400?w[t]:29}}},g=["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur"],v=["January","February","March","April","May","June","July","August","September","October","November","December"],w=[31,28,31,30,31,30,31,31,30,31,30,31],y={1:"st",2:"nd",3:"rd",21:"st",22:"nd",23:"rd",31:"st"},M=[],V={calendarClick:function(n){if(n.target.className)switch(n.target.className){case"prev-month":case"prevMonth":this.currentMonthView--,this.currentMonthView<0&&(this.currentYearView--,this.currentMonthView=11),u.call(this);break;case"next-month":case"nextMonth":this.currentMonthView++,this.currentMonthView>11&&(this.currentYearView++,this.currentMonthView=0),u.call(this);break;case"day":this.element.value=t(new Date(this.currentYearView,this.currentMonthView,n.target.innerHTML).getTime(),this.config.dateFormat),this.close()}},documentClick:function(t){if(t.target!=this.element&&t.target!=this.calendar){var n=t.target.parentNode;if(n!=this.calender)for(;n!=this.calendar;)if(n=n.parentNode,null==n){this.close();break}}}};return function(t,i){var a=this;if(this.element=document.getElementById(t),this.config={fullCurrentMonth:!0,dateFormat:"F jS, Y"},this.currentYearView=m.current.year(),this.currentMonthView=m.current.month.integer(),i)for(var c in i)this.config.hasOwnProperty(c)&&(this.config[c]=i[c]);this.documentClick=function(t){V.documentClick.call(a,t)},this.open=function(t){e(document,"click",a.documentClick),n(f,function(t){t!=a&&t.close()}),a.calendar.style.display="block"},this.close=function(){r(document,"click",a.documentClick),a.calendar.style.display="none"},this.calendar=d.call(this),f.push(this),"INPUT"==this.element.nodeName?e(this.element,"focus",this.open):e(this.element,"click",this.open)}}();